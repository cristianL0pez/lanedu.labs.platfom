<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LANEDU Labs - Dashboard</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="login-screen" class="overlay">
    <div class="login-card">
      <h1>LANEDU Labs</h1>
      <p class="terminal-line">INITIALIZING SYSTEM‚Ä¶</p>
      <p class="subtitle">Crea tu perfil interno. Conectar GitHub ser√° necesario solo al validar Labs.</p>
      <form id="login-form">
        <label for="player-alias">Nombre de jugador</label>
        <input
          type="text"
          id="player-alias"
          name="player-alias"
          placeholder="Tu alias en LANEDU"
          required
        />
        <button type="submit">Entrar a LANEDU</button>
      </form>
      <p class="hint">ACCESS GRANTED: Explora y aprende sin fricci√≥n. Conectar√°s GitHub solo cuando verifiques un Pull Request.</p>
    </div>
  </div>

  <div id="github-connect" class="overlay hidden">
    <div class="login-card">
      <h2>Conectar con GitHub</h2>
      <p class="subtitle">Solo para validar Labs con Pull Requests. No afecta tu navegaci√≥n.</p>
      <form id="github-connect-form">
        <label for="github-token">Token personal u OAuth</label>
        <input
          type="password"
          id="github-token"
          name="github-token"
          placeholder="ghp_xxxxx"
          required
        />
        <button type="submit">Conectar</button>
        <button type="button" id="cancel-github-connect" class="ghost">Cancelar</button>
      </form>
      <p class="mini-hint">Se usa solo para leer tu usuario y PRs. No almacenamos tu c√≥digo.</p>
    </div>
  </div>

  <header class="topbar">
    <div class="logo">‚ö° LANEDU Labs</div>
    <nav class="primary-nav">
      <button id="nav-dashboard" class="nav-btn active" title="Volver al dashboard">Dashboard</button>
      <a id="nav-profile" class="nav-btn" title="Gestionar perfil y tokens" href="perfil.html">Perfil</a>
    </nav>
    <div class="player-info">
      <span id="player-name">Jugador</span>
      <span class="badge" id="player-level">Nivel 1</span>
      <button id="logout-btn" class="ghost">Salir</button>
    </div>
  </header>

  <main class="layout" id="dashboard-view">
    <section class="panel routes">
      <div class="panel-header">
        <h2>Rutas de aprendizaje</h2>
        <span class="mini-hint">Ruta 0 obligatoria. Completa la base de GitHub para desbloquear las dem√°s rutas.</span>
      </div>
      <div id="routes-list" class="routes-list"></div>
    </section>

    <section class="panel stats">
      <h2>Progreso</h2>
      <div class="stat-grid">
        <div class="stat-card">
          <p class="label">XP Total</p>
          <p class="value" id="xp-total">0</p>
        </div>
        <div class="stat-card">
          <p class="label">Nivel</p>
          <p class="value" id="level-name">-</p>
        </div>
        <div class="stat-card">
          <p class="label">Labs completados</p>
          <p class="value" id="labs-completed">0</p>
        </div>
      </div>
    </section>

    <section class="panel labs">
      <div class="panel-header space-between">
        <div>
          <h2>Labs por ruta</h2>
          <span class="mini-hint" id="current-route-label">Selecciona una ruta para ver su recorrido.</span>
        </div>
        <span class="pill soft" id="route-progress-pill">0% ruta</span>
      </div>
      <div id="labs-list" class="labs-list"></div>
    </section>

    <section class="panel detail">
      <div class="panel-header">
        <h2 id="lab-title">Selecciona un lab</h2>
        <span class="status-flag locked" id="lab-status">LOCKED</span>
      </div>
      <div class="lab-content">
        <p class="label">Historia</p>
        <p id="lab-story">Elige un lab para ver la narrativa.</p>

        <p class="label">Objetivo</p>
        <p id="lab-objective">-</p>

        <div class="validation-meta">
          <div>
            <p class="label">Tipo de validaci√≥n</p>
            <p id="lab-validation-type" class="mini-hint">-</p>
          </div>
          <div>
            <p class="label">Qu√© se valida</p>
            <ul id="lab-validation-checks"></ul>
          </div>
          <div>
            <p class="label">Qu√© no se valida</p>
            <ul id="lab-validation-exclusions"></ul>
          </div>
        </div>

        <p class="label">Reglas</p>
        <ul id="lab-rules"></ul>

        <p class="label">Entregable</p>
        <p id="lab-deliverable" class="mini-hint">-</p>
        <p class="label">Acciones</p>
        <div class="actions">
          <button id="verify-btn">Verificar progreso</button>
          <span id="lab-status-chip" class="status-flag locked">LOCKED</span>
        </div>
        <div id="validation-message" class="status-box hidden"></div>
        <p class="mini-hint" id="validation-hint">La validaci√≥n depende del tipo de Lab. Conecta GitHub solo cuando un Lab lo requiera.</p>
      </div>
    </section>

    <section class="panel ranking">
      <div class="panel-header">
        <h2>Ranking local</h2>
        <span class="mini-hint">Comparte navegador = comparte progreso.</span>
      </div>
      <div id="ranking-list" class="ranking-list"></div>
    </section>
  </main>
  <footer class="footer">Dise√±ado para aprender haciendo. Sin teor√≠a, solo labs. üõ†Ô∏è</footer>

  <script type="module" src="app.js"></script>
</body>
</html>
